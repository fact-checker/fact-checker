<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="K6iIFaJRZya6A9k2YQBekwuNwn69B0hFD7KSZgvAWlI" />
    <title>RidGPT • AI Involvement Content Checker</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://kit.fontawesome.com/7eb79cf2e3.js" crossorigin="anonymous"></script>
    
    <link rel="icon" type="image/png" sizes="192x192" href="/ico/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/ico/android-chrome-512x512.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/ico/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/ico/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/ico/favicon-32x32.png">
    <link rel="icon" href="/ico/favicon.ico">
    <link rel="manifest" href="/ico/site.webmanifest">
    
    <link rel="stylesheet" href="style.css"> 
</head>
<body> 
    
    <div class="container">
        <div class="header">
            <img src="logo.png" alt="RidGPT Logo" class="logo">
            <div class="headtxt">
                <h1>RidGPT</h1>
            </div>
        </div>
        <h6 style="margin-bottom: 0px;">Check content for AI involvement.  <i class="fa-solid fa-magnifying-glass"></i></h6>
        <div class="textarea-container">
        <textarea id="contentInput" rows="10" maxlength="5000" placeholder="Enter some content here..."></textarea>
        <div id="charCount">0 / 5000</div> <!-- Character count div -->
        </div>
        <button id="checkBtn" style="margin-bottom: 0px; margin-top: 20px;">Check Content <i class="fa-regular fa-eye"></i></button>
        <!-- Reload button (starts the retrain function) added here -->
        <div id="loader" class="loader"></div> <!-- Loader div -->
        <div id="resultContainer">
            <div id="result" class="hide"></div>
        </div>
     </div>
      <span class="verbadge" id="version-number">Fetching Version <i class="fa-solid fa-circle fa-beat-fade"></i></span></span>
    <h6 class="info-section" style="opacity: 1;">
        <span style="opacity: 0.8;">Report a problem by clicking </span><a href="https://forms.gle/itJUJ7TwdyoTEhep9">here</a><span style="opacity: 0.8;">.</span>
    </h6>
    <h6 class="copyright">
        Copyright © <script>document.write(new Date().getFullYear());</script>, <b><span class="lm-text-theme">RidGPT</span></b>. All rights reserved.
    </h6>

    <script>
// Character counter
        const contentInput = document.getElementById('contentInput');
        const charCount = document.getElementById('charCount');
        const maxChars = 5000;

        contentInput.addEventListener('input', function() {
            const currentLength = contentInput.value.length;
            charCount.textContent = `${currentLength} / ${maxChars}`;

            // Limit input to maxChars
            if (currentLength > maxChars) {
                contentInput.value = contentInput.value.substring(0, maxChars);
                charCount.textContent = `${maxChars} / ${maxChars}`;
            }
        });

// Version fetcher
async function fetchTotalCommitCount() {
    const username = 'ridgpt';
    const repository = 'ridgpt.github.io';
    const apiUrl = `https://api.github.com/repos/${username}/${repository}/commits`;
    let totalCommits = 0;
    let page = 1;
    const perPage = 100; // Fetch 100 commits per request

    try {
        while (true) {
            const response = await fetch(`${apiUrl}?per_page=${perPage}&page=${page}`);
            if (!response.ok) {
                throw new Error('Bad network response');
            }

            const data = await response.json();

            if (data.length === 0) break; // Exit loop if no more commits
            totalCommits += data.length; // Add to total commits
            page++; // Move to the next page
        }

        updateVersion(totalCommits);
    } catch (error) {
        console.error('Error fetching commit count:', error);
    }
}

function updateVersion(commitCount) {
    const major = 1;  // Major version
    const minor = 0;  // Minor version
    const patch = commitCount; // Use commit count for the patch version

    // Create the semantic version string
    const version = `${major}.${minor}.${patch}`;
    
    // Update the version display on the webpage
    document.getElementById('version-number').innerHTML = `v${version}-experimental <i class="fa-solid fa-flask"></i>`;
}

// Call the function to fetch commit count and update version
fetchTotalCommitCount();
    </script>
    
    <script src="app.js"></script>
</body>
</html>
